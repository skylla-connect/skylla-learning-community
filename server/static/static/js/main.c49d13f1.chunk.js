(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[2],{13:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"c",(function(){return h}));var r=n(4),a=n.n(r),s=n(11),i=n(16),o=n(1),c=n.n(o),u=n(15),l=n.n(u),d=(n(52),n(54),n(61),{apiKey:"AIzaSyAAjENIM451OC_xgBv1uLi-XNbffD8hlh8",authDomain:"skylla-abe57.firebaseapp.com",databaseURL:"https://skylla-abe57.firebaseio.com",projectId:"skylla-abe57",storageBucket:"skylla-abe57.appspot.com",messagingSenderId:"192490377014",appId:"1:192490377014:web:4f2f11dc73dcf8f39f2d97"});t.b=function e(){var t=this;Object(i.a)(this,e),this.requestFirebaseNotificationPermission=function(){return new Promise((function(e){t.messaging.getToken().then((function(t){e(t)})).catch((function(e){console.log(e)}))}))},this.onMessageListener=function(){return new Promise((function(e){t.messaging.onMessage((function(t){console.log(t),e(t)}))}))},this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doCreateNewUser=function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.doc("/users/trainee/users/".concat(n.userId)).set(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.doCreateNewTrainer=function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.doc("/users/trainer/sys_trainers/".concat(n.userId)).set(n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.doGetUserAdmin=function(e){return t.db.doc("/users/admin/users/".concat(e)).get()},this.doGetUserTrainer=function(e){return t.db.doc("/users/trainer/users/".concat(e)).get()},this.doGetUserTrainee=function(e){return t.db.doc("/users/trainee/users/".concat(e)).get()},this.doGetMessages=function(){var e=Object(s.a)(a.a.mark((function e(n,r,s){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===s&&(s=r>-10&&r<0?-1:r+9),e.next=3,t.db.collection("/messages/".concat(n,"/dialogue")).orderBy("createdAt","desc").limit(s).get().then((function(e){var t=[];return e.docs.map((function(e){t.push(e.data())})),t})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.doPushMessage=function(){var e=Object(s.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("/messages/".concat(n.roomId,"/dialogue")).add(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.doSetTokens=function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.doc("/users/admin/tokens/".concat(t.id)).set(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this.doGetTokens=Object(s.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.db.collection("/users/admin/tokens").get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),this.doGetAdmins=function(){return t.db.collection("/users/admin/users").get()},l.a.initializeApp(d),this.auth=l.a.auth(),this.db=l.a.firestore(),this.messaging=l.a.messaging()};var f=c.a.createContext(null),h=function(e){return function(t){return c.a.createElement(f.Consumer,null,(function(n){return c.a.createElement(e,Object.assign({},t,{firebase:n}))}))}}},18:function(e,t,n){"use strict";var r=n(1),a=n.n(r).a.createContext(null);t.a=a},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(5),a=n(25),s=n(42),i=Object(r.c)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),o=a.a.div({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100vh"});function c(e){return Object(r.b)(s.a,Object.assign({css:{animation:"".concat(i," 1s linear infinite")},"aria-label":"loading"},e))}function u(){return Object(r.b)(o,null,Object(r.b)("div",{css:{fontSize:"4em"}},Object(r.b)(c,null)))}var l=a.a.div({display:"flex",flexDirection:"column"})},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return v}));var r=n(30),a=n(1),s=n.n(a),i=n(21),o=(n(43),n(26)),c=n(16),u=n(27),l=n(29),d=n(28),f=n(18),h=n(13),m=function(e){var t=function(t){Object(l.a)(r,t);var n=Object(d.a)(r);function r(e){var t;return Object(c.a)(this,r),(t=n.call(this,e)).state={authUser:null,isSettled:!1},t}return Object(u.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t,isSettled:!0}):e.setState({authUser:null,isSettled:!0})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return s.a.createElement(f.a.Provider,{value:Object(o.a)({},this.state)},s.a.createElement(e,this.props))}}]),r}(s.a.Component);return Object(h.c)(t)},b=function(){return Promise.all([n.e(0),n.e(4),n.e(1),n.e(6)]).then(n.bind(null,370))},p=s.a.lazy(b),g=s.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,381))}));function v(){var e=s.a.useContext(f.a);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}t.a=m((function(){var e=s.a.useState(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],o=v(),c=o.isSettled,u=o.authUser;return s.a.useEffect((function(){b()}),[]),s.a.useLayoutEffect((function(){c&&a(!0)}),[c]),n?s.a.createElement(s.a.Suspense,{fallback:s.a.createElement(i.c,null)},u?s.a.createElement(p,null):s.a.createElement(g,null)):s.a.createElement(i.c,null)}))},44:function(e,t,n){e.exports=n(60)},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),s=n(31),i=n.n(s),o=n(34);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(13);n(58),n(59);i.a.render(a.a.createElement(c.a.Provider,{value:new c.b},a.a.createElement(o.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.register("./firebase-messaging-sw.js").then((function(e){console.log("Registration successful, scope is:",e.scope)})).catch((function(e){console.log("Service worker registration failed, error:",e)}))}},[[44,3,5]]]);
//# sourceMappingURL=main.c49d13f1.chunk.js.map